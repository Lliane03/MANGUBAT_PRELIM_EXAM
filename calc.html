<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Grade Calculator</title>
    <!-- Link to PyScript CSS -->
    <link rel="stylesheet" href="https://pyscript.net/latest/pyscript.css">
    <!-- Link to PyScript JS -->
    <script defer src="https://pyscript.net/latest/pyscript.js"></script>
    <!-- Internal CSS for styling the webpage -->
    <style>  
        body {  
         font-family: Cambria, serif;
         background-color: #f0f8ff; 
         margin: 0;  
         padding: 20px;  
         display: flex;  
         flex-direction: column;  
         align-items: center;
         font-size: large;
        }  
        
        h1 {  
         color: #070606;  
         font-weight: bold; 
        }  
        
        label, input, button {  
         margin: 10px 0;  
         padding: 10px;  
        }  
        
        input[type="number"] {  
         width: 50%;
         padding: 10px;  
         font-size: 20px; 
         border: 1px solid #ccc;  
         border-radius: 5px;  
        }  
        
        button {  
         padding: 10px 20px;  
         background-color: #e4507c;  
         color: white;  
         border: none;  
         border-radius: 5px;  
         cursor: pointer;  
         transition: background-color 0.2s ease-in-out;
        }  
        
        button:hover {  
         background-color: #000ba8; 
        }  
        
        #results {  
         margin-top: 20px;  
         padding: 20px;
         border: 1px solid #ccc;  
         border-radius: 5px;  
         background-color: #fff;  
         width: 100%;  
         max-width: 400px;  
         text-align: center;  
         box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
        }  
      </style>
</head>
<body>
    <!-- Page title -->
    <h1>Grade Calculator</h1>
    <!-- Input fields for grades and absences -->
    <label for="absences">Number of Absences:</label>
    <input type="number" id="absences" min="0"><br>
    <label for="prelim">Prelim Exam Grade (0-100):</label>
    <input type="number" id="prelim" min="0" max="100"><br>
    <label for="quizzes">Quizzes Grade (0-100):</label>
    <input type="number" id="quizzes" min="0" max="100"><br>
    <label for="requirements">Requirements Grade (0-100):</label>
    <input type="number" id="requirements" min="0" max="100"><br>
    <label for="recitation">Recitation Grade (0-100):</label>
    <input type="number" id="recitation" min="0" max="100"><br><br>
    <!-- Button to trigger grade calculation -->
    <button id="calculate-btn">Calculate</button>
    
    <!-- Section to display results -->
    <h2>Results</h2>
    <p id="results"></p>

    <!-- PyScript code for grade calculation -->
    <py-script>
        from pyscript import Element

        def calculate_grades(*args):
            # Get the values from the input fields
            absences = int(Element("absences").element.value)
            prelim = float(Element("prelim").element.value)
            quizzes = float(Element("quizzes").element.value)
            requirements = float(Element("requirements").element.value)
            recitation = float(Element("recitation").element.value)
            results = Element("results")
            
            # Validate input values for prelim, quizzes, requirements, and recitation
            if any(value < 0 or value > 100 for value in [prelim, quizzes, requirements, recitation]):
                results.element.innerHTML = "Please input a valid numerical value, ranging from 0 to 100."
                return
            
            # Check for automatic fail due to absences
            if absences >= 4:
                results.element.innerHTML = "FAILED due to excessive absences."
                return

            # Calculate attendance grade
            attendance = max(0, 100 - (absences * 10))
            
            # Calculate class standing
            class_standing = (0.4 * quizzes) + (0.3 * requirements) + (0.3 * recitation)
            
            # Calculate prelim grade
            prelim_grade = (0.6 * prelim) + (0.1 * attendance) + (0.3 * class_standing)
            
            # Ensure prelim grade is within 0 to 100
            prelim_grade = max(0, min(100, prelim_grade))
            
            # Calculate required midterm and final grades for passing and Dean's Lister   
            passing_grade = 75   
            deans_lister_grade = 90   
            
            # Calculate required midterm and final grades to pass  
            remaining_pass = passing_grade - (prelim_grade * 0.2)  
            required_midterm_pass = max(passing_grade, remaining_pass * 0.6) 
            required_final_pass = max(passing_grade, remaining_pass * 0.8)  
            
            # Calculate required midterm and final grades to be a Dean's Lister  
            remaining_dean = deans_lister_grade - (prelim_grade * 0.2)  
            required_midterm_dean = max(deans_lister_grade, remaining_dean * 0.6) 
            required_final_dean = max(deans_lister_grade, remaining_dean * 0.8) 
            
            # Ensure required grades are not negative values
            required_midterm_pass = max(0, required_midterm_pass)  
            required_final_pass = max(0, required_final_pass)  
            required_midterm_dean = max(0, required_midterm_dean)  
            required_final_dean = max(0, required_final_dean)  
            
            # Display results  
            message = f"Prelim Grade: {prelim_grade:.2f}<br>"  
            message += f"To pass with 75%, you need a Midterm grade of at least {required_midterm_pass:.2f} and a Final grade of at least {required_final_pass:.2f}.<br>"  
            message += f"To achieve 90%, you need a Midterm grade of at least {required_midterm_dean:.2f} and a Final grade of at least {required_final_dean:.2f}."
            
            results.element.innerHTML = message

        # Bind the calculate_grades function to the button click event
        Element("calculate-btn").element.onclick = calculate_grades
    </py-script>
</body>
</html>